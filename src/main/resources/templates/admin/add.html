<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>woodwhales-music</title>
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">
    <script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/layui/layui.js}"></script>
    <link rel="stylesheet" th:href="@{/webjars/layui/css/layui.css}" />
    <style type="text/css">
        .x-admin-backlog .x-admin-backlog-body {
            display: block;
            padding: 10px 15px;
            background-color: #f8f8f8;
            color: #999;
            border-radius: 2px;
            transition: all .3s;
            -webkit-transition: all .3s
        }

        html {
            overflow: -moz-hidden-unscrollable;
            height: 100%;
        }

        body::-webkit-scrollbar {
            display: none;
        }

        body {
            -ms-overflow-style: none;
            height: 100%;
            width: calc(100vw + 18px);
            overflow: auto;
        }
    </style>
</head>
<body>
<div class="layui-main site-inline">
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>woodwhales-music-admin</legend>
    </fieldset>

    <blockquote class="layui-elem-quote">移风易俗，莫善于乐。</blockquote>

    <button type="button" class="layui-btn layui-btn-xs" th:onclick="returnHome()">返回</button>

    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>添加音乐</legend>
    </fieldset>

    <form class="layui-form" action="">
        <div class="layui-form-item">
            <label class="layui-form-label">名称</label>
            <div class="layui-input-block">
                <input type="text" id="musicName" name="musicName" lay-verify="required" autocomplete="off" placeholder="请输入音乐名称" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">作者</label>
            <div class="layui-input-block">
                <input type="text" id="artist" name="artist" lay-verify="required" autocomplete="off" placeholder="请输入作者" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">专辑</label>
            <div class="layui-input-block">
                <input type="text" id="album" name="album" lay-verify="required" autocomplete="off" placeholder="请输入专辑" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">链接</label>
            <div class="layui-input-block">
                <input type="text" id="audioUrl" name="audioUrl" lay-verify="required" autocomplete="off" placeholder="请输入链接" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">封面</label>
            <div class="layui-input-block">
                <input type="text" id="coverUrl" name="coverUrl" lay-verify="required" autocomplete="off" placeholder="请输入封面" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">排序</label>
            <div class="layui-input-block">
                <input type="text" id="sort" name="sort" autocomplete="off" placeholder="请输入排序值" class="layui-input">
            </div>
        </div>
		<div class="layui-form-item">
			<div class="layui-input-block">
			  <button type="submit" class="layui-btn" lay-submit="" lay-filter="submitFilter">立即提交</button>
			  <button type="reset" class="layui-btn layui-btn-primary">重置</button>
			</div>
		</div>
    </form>

    <blockquote class="layui-elem-quote">
        <p>© 2020 <a href="https://woodwhales.cn/" target="_blank">woodwhales's blog</a>&nbsp;木鲸鱼</p>
    </blockquote>

</div>

<script th:inline="none">
    function returnHome() {
        location.href = './';
    }

    layui.use(['form', 'layer', 'table'], function(){
        var form = layui.form,
            table = layui.table,
            layer = layui.layer;

        form.on('submit(submitFilter)', function(data){
            var index =layer.load(2, { shade: [0.1,'#fff'] });
            $.ajax({
                url:'./admin/createMusic',
                type:'post',
                dataType:'json',
                contentType:"application/json",
                async:true,
                cache:false,
                data:JSON.stringify(data.field),
                success:function(res) {
                    table.reload('musicTable', {
                        url: './admin/pageMusic'
                        ,where: {}
                    });
                    layer.close(index);
                    layer.msg(res.msg, {icon: 1});
                },
                error:function(res) {
                    layer.close(index);
                    layer.msg('网络异常', {icon: 5});
                }
            });

            return false;
        });
    });
</script>
</body>
</html>